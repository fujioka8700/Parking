<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>タワーパークMT型 センサ状態一括解読ツール</title>
    <style>
        body { font-family: "Helvetica Neue", Arial, sans-serif; background: #eef2f7; padding: 20px; color: #333; line-height: 1.4; }
        .main-title { text-align: center; color: #2c3e50; margin-bottom: 30px; border-bottom: 3px solid #3498db; display: inline-block; width: 100%; padding-bottom: 10px; }
        .container { max-width: 900px; margin: auto; display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        @media (max-width: 768px) { .container { grid-template-columns: 1fr; } }
        .card { background: white; padding: 18px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); border-top: 4px solid #3498db; }
        h2 { font-size: 1rem; margin: 0 0 12px 0; color: #34495e; display: flex; justify-content: space-between; }
        .input-group { margin-bottom: 10px; }
        input { width: 100%; padding: 10px; font-size: 18px; text-transform: uppercase; border: 1px solid #bdc3c7; border-radius: 4px; box-sizing: border-box; font-family: 'Courier New', Courier, monospace; background: #fcfcfc; }
        input:focus { border-color: #3498db; outline: none; background: #fff; box-shadow: 0 0 5px rgba(52,152,219,0.3); }
        .on-list { list-style: none; padding: 0; margin: 0; min-height: 20px; }
        .on-list li { background: #fff5f5; color: #c0392b; padding: 6px 10px; margin-top: 5px; border-radius: 3px; border-left: 4px solid #e74c3c; font-size: 0.85rem; font-weight: bold; display: flex; justify-content: space-between; }
        .addr { font-size: 0.75rem; color: #7f8c8d; font-weight: normal; }
        .no-signal { font-size: 0.8rem; color: #95a5a6; font-style: italic; margin-top: 5px; }
    </style>
</head>
<body>

<h1 class="main-title">センサ状態解読 (タワーパーク MT型)</h1>

<div class="container">
    <script>
        const sensorDefinitions = {
            1: [
                "X000: 左循環減速検出LS", "X001: 循環停止位置検出LS", "X002: 入口部非常停止検出光電管", "X003: 車輌入口側検出光電管",
                "X004: 在庫車検出光電管", "X005: 車輌奥側検出光電管", "X006: 塔内安全確認用光電管", "X007: 車輌入口･奥側非常検出光電管",
                "X008: 安全柵閉検出確認光電管", "X009: 車高オーバー検出用LS", "X00A: 予備", "X00B: 予備",
                "X00C: 左側ドア開検出光電管", "X00D: 右側ドア開検出光電管", "X00E: 乗入階非常停止スイッチ", "X00F: 上部点検架台点検スイッチ"
            ],
            2: [
                "X010: 右側自動安全柵閉検出LS(固定ピン：引）", "X011: 右側自動安全柵閉検出LS（固定ピン：出）", "X012: 右側自動安全柵開検出LS（固定ピン：引）", "X013: 左側自動安全柵閉検出LS（固定ピン：引）",
                "X014: 左側自動安全柵閉検出LS（固定ピン：出）", "X015: 左側自動安全柵開検出LS（固定ピン：引）", "X016: 右側自動安全柵用ﾊﾟﾜｰｼﾘﾝﾀﾞｰ出側極限(内蔵LS)", "X017: 右側自動安全柵用ﾊﾟﾜｰｼﾘﾝﾀﾞｰ戻側極限（内蔵LS)",
                "X018: 左側自動安全柵用ﾊﾟﾜｰｼﾘﾝﾀﾞｰ出側極限(内蔵LS)", "X019: 左側自動安全柵用ﾊﾟﾜｰｼﾘﾝﾀﾞｰ戻側極限(内蔵LS)", "X01A: 予備", "X01B: 予備",
                "X01C: 予備", "X01D: 予備", "X01E: 予備", "X01F: 予備"
            ],
            3: [
                "X020: 主電動機・ブレーキ過負荷", "X021: 右側自動安全柵用パワーシリンダー過負荷", "X022: 左側自動安全柵用パワーシリンダー過負荷", "X023: 予備",
                "X024: 消火装置（機械停止信号）", "X025: 消火装置（出入口扉信号）", "X026: 出入口扉全閉検出用LS", "X027: 出入口扉全開検出用LS",
                "X028: 予備", "X029: 予備", "X02A: 予備", "X02B: 予備",
                "X02C: 予備", "X02D: 予備", "X02E: 予備", "X02F: 予備"
            ],
            4: [
                "X030: リフト上限検出LS", "X031: リフト下限検出LS", "X032: ターンテーブル右回転低速検出用LS", "X033: ターンテーブル左回転低速検出用LS",
                "X034: ターンテーブル右回転停止検出用LS", "X035: ターンテーブル左回転停止検出用LS", "X036: 空き", "X037: 空き",
                "X038: 横行用シリンダー左行過検出用LS", "X039: 横行用シリンダー右行過検出用LS", "X03A: 横行用シリンダー左行指令光電管", "X03B: 横行用シリンダー右行指令光電管",
                "X03C: 予備", "X03D: 横行用パワーシリンダー過負荷", "X03E: リフト用電動機過負荷", "X03F: ターンテーブル用インバータ異常"
            ],
            5: [
                "X040: テンキー（9）", "X041: テンキー（6）", "X042: テンキー（3）", "X043: テンキー（取消）",
                "X044: テンキー（8）", "X045: テンキー（5）", "X046: テンキー（2）", "X047: テンキー（0）",
                "X048: テンキー（7）", "X049: テンキー（4）", "X04A: テンキー（1）", "X04B: テンキー（+）",
                "X04C: テンキー（出庫）", "X04D: テンキー（途中停止）", "X04E: テンキー（扉開）", "X04F: テンキー（右回転）"
            ],
            6: [
                "X050: テンキー（入庫）", "X051: テンキー（起動）", "X052: テンキー（扉閉）", "X053: テンキー（左回転）",
                "X054: 切スイッチ", "X055: メンテナンススイッチ", "X056: 非常停止押釦", "X057: 予備",
                "X058: 予備", "X059: 予備", "X05A: 予備", "X05B: 予備",
                "X05C: 予備", "X05D: 予備", "X05E: 予備", "X05F: 予備"
            ]
        };

        // カードを生成
        for (let i = 1; i <= 6; i++) {
            document.write(`
                <div class="card">
                    <h2>センサ状態${i} <span style="font-size:0.8rem; color:#95a5a6;">X0${i-1}0-X0${i-1}F</span></h2>
                    <div class="input-group">
                        <input type="text" id="hex${i}" maxlength="4" placeholder="0000" oninput="decode(${i})">
                    </div>
                    <ul id="list${i}" class="on-list"></ul>
                </div>
            `);
        }

        function decode(num) {
            const valStr = document.getElementById('hex' + num).value;
            const list = document.getElementById('list' + num);
            list.innerHTML = "";

            if (valStr.length !== 4) return;
            const val = parseInt(valStr, 16);
            if (isNaN(val)) return;

            let hasOn = false;
            const names = sensorDefinitions[num];

            for (let i = 0; i < 16; i++) {
                if ((val >> i) & 1) {
                    const li = document.createElement('li');
                    li.innerHTML = `<span>${names[i]}</span><span class="addr">BIT ${i}</span>`;
                    list.appendChild(li);
                    hasOn = true;
                }
            }

            if (!hasOn) {
                list.innerHTML = '<div class="no-signal">ONのセンサはありません</div>';
            }
        }
    </script>
</div>

</body>
</html>